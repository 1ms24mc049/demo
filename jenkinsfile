
pipeline {
	agent any
	
	environment {
		DOCKERHUB_CRED=credentials('dockerhub')
		IMAGE_NAME="1ms24mc049/demo"
	}
	trtiggers{
		cron('* * * * *')
	}
	
	stages {
		stage('checkout') {
			steps {
				git url:'https://github.com/1ms24mc049/demo.git', branch:'main'
			}
		}
	stage('Build React App') {
    steps {
        sh '''
        npm install
        npm run build
        '''
    }
}


		
		stage('Build Docker Image') {
            		steps {
                		script {
                    			dockerImage = docker.build("${IMAGE_NAME}:latest")
                		}
            		}
        	}

		stage('Push Docker Image'){
			steps {
				script {
					docker.withRegistry('https://index.docker.io/v1/','dockerhub'){
						dockerImage.push()
					}
				}
			}
		}	
	}
}
	
